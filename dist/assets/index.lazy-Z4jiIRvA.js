import{b as c,j as e,dX as ze,dY as Ee,dZ as Le,d_ as _e,cC as _,cD as H,cE as He,cF as Oe,d$ as qe,e0 as $e,e1 as Ge,e2 as Be,cx as Q,e3 as Ke,e4 as We,e5 as ee,e6 as se,e7 as ae,e8 as te,e9 as le,ea as re,eb as Je,ec as ne,ed as Ye,ee as Ze,cG as Xe,cH as Qe,cI as es,cJ as ss,cK as as,cL as ts,cM as ls,cY as rs,cO as ns,cz as is,cA as O,dC as os}from"./react-vendor-DHXlblm3.js";import{l as o,T as cs,i as ds,j as ms,k as xs,Y as ie,Z as oe,_ as ce,$ as M,a0 as de,B as m,a1 as U,a2 as T,a3 as z,a4 as q,C as $,a5 as F,a as me,a6 as v,b as xe,c as ue,d as he,S as V,D as ge,e as pe,f as je,g as fe,a7 as Ne,a8 as ve,a9 as h,aa as g,ab as p,I as b,ac as j,ad as we,W as be,L as us,ae as hs,af as gs,ag as ps,h as js,ah as fs,ai as Ns,aj as vs,ak as ws,al as G,am as B,an as bs,ao as ys,ap as Cs,aq as Ss,ar as Ds,as as A,at as Is,au as Ps,av as K,X as Ts}from"./index-2NBrDHfX.js";import{aE as ye,aC as E,b3 as ks,aD as d,b1 as P,ad as Fs,b4 as Rs,b5 as W,b6 as Ce,b7 as y,b8 as N}from"./vendor-bQrEs1q3.js";import{P as J}from"./password-input-YIeExveL.js";import{F as As,G as Vs,C as Ms,D as Us,A as zs,E as Es}from"./tanstack-vendor-CGADoYpr.js";function Y({children:s,className:a="",contentClassName:t=""}){const r=c.useRef(null),[l,n]=c.useState(!1);return c.useEffect(()=>{if(Ls(r.current)){n(!0);return}n(!1)},[]),l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden sm:block",children:e.jsx(cs,{delayDuration:0,children:e.jsxs(ds,{children:[e.jsx(ms,{asChild:!0,children:e.jsx("div",{ref:r,className:o("truncate",a),children:s})}),e.jsx(xs,{children:e.jsx("p",{className:t,children:s})})]})})}),e.jsx("div",{className:"sm:hidden",children:e.jsxs(ie,{children:[e.jsx(oe,{asChild:!0,children:e.jsx("div",{ref:r,className:o("truncate",a),children:s})}),e.jsx(ce,{className:o("w-fit",t),children:e.jsx("p",{children:s})})]})})]}):e.jsx("div",{ref:r,className:o("truncate",a),children:s})}const Ls=s=>s?s.offsetHeight<s.scrollHeight||s.offsetWidth<s.scrollWidth:!1,_s=new Map([["active","bg-teal-100/30 text-teal-900 dark:text-teal-200 border-teal-200"],["inactive","bg-neutral-300/40 border-neutral-300"],["invited","bg-sky-200/40 text-sky-900 dark:text-sky-100 border-sky-300"],["suspended","bg-destructive/10 dark:bg-destructive/50 text-destructive dark:text-primary border-destructive/10"]]),R=[{label:"Superadmin",value:"superadmin",icon:ze},{label:"Admin",value:"admin",icon:Ee},{label:"Manager",value:"manager",icon:Le},{label:"Cashier",value:"cashier",icon:_e}];function D({column:s,title:a,className:t}){return s.getCanSort()?e.jsx("div",{className:o("flex items-center space-x-2",t),children:e.jsxs(M,{children:[e.jsx(de,{asChild:!0,children:e.jsxs(m,{variant:"ghost",size:"sm",className:"-ml-3 h-8 data-[state=open]:bg-accent",children:[e.jsx("span",{children:a}),s.getIsSorted()==="desc"?e.jsx(_,{className:"ml-2 h-4 w-4"}):s.getIsSorted()==="asc"?e.jsx(H,{className:"ml-2 h-4 w-4"}):e.jsx(He,{className:"ml-2 h-4 w-4"})]})}),e.jsxs(U,{align:"start",children:[e.jsxs(T,{onClick:()=>s.toggleSorting(!1),children:[e.jsx(H,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Asc"]}),e.jsxs(T,{onClick:()=>s.toggleSorting(!0),children:[e.jsx(_,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Desc"]}),s.getCanHide()&&e.jsxs(e.Fragment,{children:[e.jsx(z,{}),e.jsxs(T,{onClick:()=>s.toggleVisibility(!1),children:[e.jsx(Oe,{className:"mr-2 h-3.5 w-3.5 text-muted-foreground/70"}),"Hide"]})]})]})]})}):e.jsx("div",{className:o(t),children:a})}function Hs(s=null){const[a,t]=c.useState(s);return[a,l=>t(n=>n===l?null:l)]}const Se=c.createContext(null),Os=({children:s})=>{const[a,t]=Hs(null),[r,l]=c.useState(null),n={open:a,setOpen:t,currentRow:r,setCurrentRow:l};return e.jsx(Se.Provider,{value:n,children:s})},L=()=>{const s=c.useContext(Se);if(!s)throw new Error("useUsers must be used within a UsersProvider");return s};function qs({row:s}){const{setOpen:a,setCurrentRow:t}=L();return e.jsx(e.Fragment,{children:e.jsxs(M,{modal:!1,children:[e.jsx(de,{asChild:!0,children:e.jsxs(m,{variant:"ghost",className:"flex h-8 w-8 p-0 data-[state=open]:bg-muted",children:[e.jsx(qe,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Open menu"})]})}),e.jsxs(U,{align:"end",className:"w-[160px]",children:[e.jsxs(T,{onClick:()=>{t(s.original),a("edit")},children:["Edit",e.jsx(q,{children:e.jsx($e,{size:16})})]}),e.jsx(z,{}),e.jsxs(T,{onClick:()=>{t(s.original),a("delete")},className:"!text-red-500",children:["Delete",e.jsx(q,{children:e.jsx(Ge,{size:16})})]})]})]})})}const $s=[{id:"select",header:({table:s})=>e.jsx($,{checked:s.getIsAllPageRowsSelected()||s.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:a=>s.toggleAllPageRowsSelected(!!a),"aria-label":"Select all",className:"translate-y-[2px]"}),meta:{className:o("sticky md:table-cell left-0 z-10 rounded-tl","bg-background transition-colors duration-200 group-hover/row:bg-muted group-data-[state=selected]/row:bg-muted")},cell:({row:s})=>e.jsx($,{checked:s.getIsSelected(),onCheckedChange:a=>s.toggleSelected(!!a),"aria-label":"Select row",className:"translate-y-[2px]"}),enableSorting:!1,enableHiding:!1},{accessorKey:"username",header:({column:s})=>e.jsx(D,{column:s,title:"Username"}),cell:({row:s})=>e.jsx(Y,{className:"max-w-36",children:s.getValue("username")}),meta:{className:o("drop-shadow-[0_1px_2px_rgb(0_0_0_/_0.1)] dark:drop-shadow-[0_1px_2px_rgb(255_255_255_/_0.1)] lg:drop-shadow-none","bg-background transition-colors duration-200 group-hover/row:bg-muted group-data-[state=selected]/row:bg-muted","sticky left-6 md:table-cell")},enableHiding:!1},{id:"fullName",header:({column:s})=>e.jsx(D,{column:s,title:"Name"}),cell:({row:s})=>{const{firstName:a,lastName:t}=s.original,r=`${a} ${t}`;return e.jsx(Y,{className:"max-w-36",children:r})},meta:{className:"w-36"}},{accessorKey:"email",header:({column:s})=>e.jsx(D,{column:s,title:"Email"}),cell:({row:s})=>e.jsx("div",{className:"w-fit text-nowrap",children:s.getValue("email")})},{accessorKey:"phoneNumber",header:({column:s})=>e.jsx(D,{column:s,title:"Phone Number"}),cell:({row:s})=>e.jsx("div",{children:s.getValue("phoneNumber")}),enableSorting:!1},{accessorKey:"status",header:({column:s})=>e.jsx(D,{column:s,title:"Status"}),cell:({row:s})=>{const{status:a}=s.original,t=_s.get(a);return e.jsx("div",{className:"flex space-x-2",children:e.jsx(F,{variant:"outline",className:o("capitalize",t),children:s.getValue("status")})})},filterFn:(s,a,t)=>t.includes(s.getValue(a)),enableHiding:!1,enableSorting:!1},{accessorKey:"role",header:({column:s})=>e.jsx(D,{column:s,title:"Role"}),cell:({row:s})=>{const{role:a}=s.original,t=R.find(({value:r})=>r===a);return t?e.jsxs("div",{className:"flex items-center gap-x-2",children:[t.icon&&e.jsx(t.icon,{size:16,className:"text-muted-foreground"}),e.jsx("span",{className:"text-sm capitalize",children:s.getValue("role")})]}):null},filterFn:(s,a,t)=>t.includes(s.getValue(a)),enableSorting:!1,enableHiding:!1},{id:"actions",cell:qs}];function De({defaultValue:s,onValueChange:a,isPending:t,items:r,placeholder:l,disabled:n,className:x="",isControlled:i=!1}){const w=i?{value:s,onValueChange:a}:{defaultValue:s,onValueChange:a};return e.jsxs(me,{...w,children:[e.jsx(v,{children:e.jsx(xe,{disabled:n,className:o(x),children:e.jsx(ue,{placeholder:l??"Select"})})}),e.jsx(he,{children:t?e.jsx(V,{disabled:!0,value:"loading",className:"h-14",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Be,{className:"h-5 w-5 animate-spin"}),"  ","Loading..."]})}):r==null?void 0:r.map(({label:C,value:f})=>e.jsx(V,{value:f,children:C},f))})]})}const Gs=E({firstName:d().min(1,{message:"First Name is required."}),lastName:d().min(1,{message:"Last Name is required."}),username:d().min(1,{message:"Username is required."}),phoneNumber:d().min(1,{message:"Phone number is required."}),email:d().min(1,{message:"Email is required."}).email({message:"Email is invalid."}),password:d().transform(s=>s.trim()),role:d().min(1,{message:"Role is required."}),confirmPassword:d().transform(s=>s.trim()),isEdit:ks()}).superRefine(({isEdit:s,password:a,confirmPassword:t},r)=>{(!s||s&&a!=="")&&(a===""&&r.addIssue({code:P.custom,message:"Password is required.",path:["password"]}),a.length<8&&r.addIssue({code:P.custom,message:"Password must be at least 8 characters long.",path:["password"]}),a.match(/[a-z]/)||r.addIssue({code:P.custom,message:"Password must contain at least one lowercase letter.",path:["password"]}),a.match(/\d/)||r.addIssue({code:P.custom,message:"Password must contain at least one number.",path:["password"]}),a!==t&&r.addIssue({code:P.custom,message:"Passwords don't match.",path:["confirmPassword"]}))});function Z({currentRow:s,open:a,onOpenChange:t}){const r=!!s,l=Q({resolver:ye(Gs),defaultValues:r?{...s,password:"",confirmPassword:"",isEdit:r}:{firstName:"",lastName:"",username:"",email:"",role:"",phoneNumber:"",password:"",confirmPassword:"",isEdit:r}}),n=()=>{l.reset(),t(!1)},x=!!l.formState.dirtyFields.password;return e.jsx(ge,{open:a,onOpenChange:i=>{l.reset(),t(i)},children:e.jsxs(pe,{className:"sm:max-w-lg",children:[e.jsxs(je,{className:"text-left",children:[e.jsx(fe,{children:r?"Edit User":"Add New User"}),e.jsxs(Ne,{children:[r?"Update the user here. ":"Create new user here. ","Click save when you're done."]})]}),e.jsx("div",{className:"-mr-4 h-[26.25rem] w-full overflow-y-auto py-1 pr-4",children:e.jsx(ve,{...l,children:e.jsxs("form",{id:"user-form",onSubmit:l.handleSubmit(n),className:"space-y-4 p-0.5",children:[e.jsx(h,{control:l.control,name:"firstName",render:({field:i})=>e.jsxs(g,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(p,{className:"col-span-2 text-right",children:"First Name"}),e.jsx(v,{children:e.jsx(b,{placeholder:"John",className:"col-span-4",autoComplete:"off",...i})}),e.jsx(j,{className:"col-span-4 col-start-3"})]})}),e.jsx(h,{control:l.control,name:"lastName",render:({field:i})=>e.jsxs(g,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(p,{className:"col-span-2 text-right",children:"Last Name"}),e.jsx(v,{children:e.jsx(b,{placeholder:"Doe",className:"col-span-4",autoComplete:"off",...i})}),e.jsx(j,{className:"col-span-4 col-start-3"})]})}),e.jsx(h,{control:l.control,name:"username",render:({field:i})=>e.jsxs(g,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(p,{className:"col-span-2 text-right",children:"Username"}),e.jsx(v,{children:e.jsx(b,{placeholder:"john_doe",className:"col-span-4",...i})}),e.jsx(j,{className:"col-span-4 col-start-3"})]})}),e.jsx(h,{control:l.control,name:"email",render:({field:i})=>e.jsxs(g,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(p,{className:"col-span-2 text-right",children:"Email"}),e.jsx(v,{children:e.jsx(b,{placeholder:"john.doe@gmail.com",className:"col-span-4",...i})}),e.jsx(j,{className:"col-span-4 col-start-3"})]})}),e.jsx(h,{control:l.control,name:"phoneNumber",render:({field:i})=>e.jsxs(g,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(p,{className:"col-span-2 text-right",children:"Phone Number"}),e.jsx(v,{children:e.jsx(b,{placeholder:"+123456789",className:"col-span-4",...i})}),e.jsx(j,{className:"col-span-4 col-start-3"})]})}),e.jsx(h,{control:l.control,name:"role",render:({field:i})=>e.jsxs(g,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(p,{className:"col-span-2 text-right",children:"Role"}),e.jsx(De,{defaultValue:i.value,onValueChange:i.onChange,placeholder:"Select a role",className:"col-span-4",items:R.map(({label:w,value:C})=>({label:w,value:C}))}),e.jsx(j,{className:"col-span-4 col-start-3"})]})}),e.jsx(h,{control:l.control,name:"password",render:({field:i})=>e.jsxs(g,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(p,{className:"col-span-2 text-right",children:"Password"}),e.jsx(v,{children:e.jsx(J,{placeholder:"e.g., S3cur3P@ssw0rd",className:"col-span-4",...i})}),e.jsx(j,{className:"col-span-4 col-start-3"})]})}),e.jsx(h,{control:l.control,name:"confirmPassword",render:({field:i})=>e.jsxs(g,{className:"grid grid-cols-6 items-center gap-x-4 gap-y-1 space-y-0",children:[e.jsx(p,{className:"col-span-2 text-right",children:"Confirm Password"}),e.jsx(v,{children:e.jsx(J,{disabled:!x,placeholder:"e.g., S3cur3P@ssw0rd",className:"col-span-4",...i})}),e.jsx(j,{className:"col-span-4 col-start-3"})]})})]})})}),e.jsx(we,{children:e.jsx(m,{type:"submit",form:"user-form",children:"Save changes"})})]})})}const Bs=Fs("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ie=c.forwardRef(({className:s,variant:a,...t},r)=>e.jsx("div",{ref:r,role:"alert",className:o(Bs({variant:a}),s),...t}));Ie.displayName="Alert";const Pe=c.forwardRef(({className:s,...a},t)=>e.jsx("h5",{ref:t,className:o("mb-1 font-medium leading-none tracking-tight",s),...a}));Pe.displayName="AlertTitle";const Te=c.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:o("text-sm [&_p]:leading-relaxed",s),...a}));Te.displayName="AlertDescription";const Ks=Ke,Ws=We,ke=c.forwardRef(({className:s,...a},t)=>e.jsx(le,{className:o("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t}));ke.displayName=le.displayName;const Fe=c.forwardRef(({className:s,...a},t)=>e.jsxs(Ws,{children:[e.jsx(ke,{}),e.jsx(ee,{ref:t,className:o("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a})]}));Fe.displayName=ee.displayName;const Re=({className:s,...a})=>e.jsx("div",{className:o("flex flex-col space-y-2 text-center sm:text-left",s),...a});Re.displayName="AlertDialogHeader";const Ae=({className:s,...a})=>e.jsx("div",{className:o("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});Ae.displayName="AlertDialogFooter";const Ve=c.forwardRef(({className:s,...a},t)=>e.jsx(se,{ref:t,className:o("text-lg font-semibold",s),...a}));Ve.displayName=se.displayName;const Me=c.forwardRef(({className:s,...a},t)=>e.jsx(ae,{ref:t,className:o("text-sm text-muted-foreground",s),...a}));Me.displayName=ae.displayName;const Js=c.forwardRef(({className:s,...a},t)=>e.jsx(re,{ref:t,className:o(be(),s),...a}));Js.displayName=re.displayName;const Ue=c.forwardRef(({className:s,...a},t)=>e.jsx(te,{ref:t,className:o(be({variant:"outline"}),"mt-2 sm:mt-0",s),...a}));Ue.displayName=te.displayName;function Ys(s){const{title:a,desc:t,children:r,className:l,confirmText:n,cancelBtnText:x,destructive:i,isLoading:w,disabled:C=!1,handleConfirm:f,...k}=s;return e.jsx(Ks,{...k,children:e.jsxs(Fe,{className:o(l&&l),children:[e.jsxs(Re,{className:"text-left",children:[e.jsx(Ve,{children:a}),e.jsx(Me,{asChild:!0,children:e.jsx("div",{children:t})})]}),r,e.jsxs(Ae,{children:[e.jsx(Ue,{disabled:w,children:x??"Cancel"}),e.jsx(m,{variant:i?"destructive":"default",onClick:f,disabled:C||w,children:n??"Continue"})]})]})})}function Zs({open:s,onOpenChange:a,currentRow:t}){const[r,l]=c.useState(""),n=()=>{r.trim()===t.username&&(a(!1),hs({title:"The following user has been deleted:",description:e.jsx("pre",{className:"mt-2 w-[340px] rounded-md bg-slate-950 p-4",children:e.jsx("code",{className:"text-white",children:JSON.stringify(t,null,2)})})}))};return e.jsx(Ys,{open:s,onOpenChange:a,handleConfirm:n,disabled:r.trim()!==t.username,title:e.jsxs("span",{className:"text-destructive",children:[e.jsx(Je,{className:"mr-1 inline-block stroke-destructive",size:18})," ","Delete User"]}),desc:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"mb-2",children:["Are you sure you want to delete"," ",e.jsx("span",{className:"font-bold",children:t.username}),"?",e.jsx("br",{}),"This action will permanently remove the user with the role of"," ",e.jsx("span",{className:"font-bold",children:t.role.toUpperCase()})," ","from the system. This cannot be undone."]}),e.jsxs(us,{className:"my-2",children:["Username:",e.jsx(b,{value:r,onChange:x=>l(x.target.value),placeholder:"Enter username to confirm deletion."})]}),e.jsxs(Ie,{variant:"destructive",children:[e.jsx(Pe,{children:"Warning!"}),e.jsx(Te,{children:"Please be carefull, this operation can not be rolled back."})]})]}),confirmText:"Delete",destructive:!0})}const Xs=E({email:d().min(1,{message:"Email is required."}).email({message:"Email is invalid."}),role:d().min(1,{message:"Role is required."}),desc:d().optional()});function Qs({open:s,onOpenChange:a}){const t=Q({resolver:ye(Xs),defaultValues:{email:"",role:"",desc:""}}),r=()=>{t.reset(),a(!1)};return e.jsx(ge,{open:s,onOpenChange:l=>{t.reset(),a(l)},children:e.jsxs(pe,{className:"sm:max-w-md",children:[e.jsxs(je,{className:"text-left",children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(ne,{})," Invite User"]}),e.jsx(Ne,{children:"Invite new user to join your team by sending them an email invitation. Assign a role to define their access level."})]}),e.jsx(ve,{...t,children:e.jsxs("form",{id:"user-invite-form",onSubmit:t.handleSubmit(r),className:"space-y-4",children:[e.jsx(h,{control:t.control,name:"email",render:({field:l})=>e.jsxs(g,{children:[e.jsx(p,{children:"Email"}),e.jsx(v,{children:e.jsx(b,{type:"email",placeholder:"eg: john.doe@gmail.com",...l})}),e.jsx(j,{})]})}),e.jsx(h,{control:t.control,name:"role",render:({field:l})=>e.jsxs(g,{className:"space-y-1",children:[e.jsx(p,{children:"Role"}),e.jsx(De,{defaultValue:l.value,onValueChange:l.onChange,placeholder:"Select a role",items:R.map(({label:n,value:x})=>({label:n,value:x}))}),e.jsx(j,{})]})}),e.jsx(h,{control:t.control,name:"desc",render:({field:l})=>e.jsxs(g,{className:"",children:[e.jsx(p,{children:"Description (optional)"}),e.jsx(v,{children:e.jsx(gs,{className:"resize-none",placeholder:"Add a personal note to your invitation (optional)",...l})}),e.jsx(j,{})]})})]})}),e.jsxs(we,{className:"gap-y-2",children:[e.jsx(ps,{asChild:!0,children:e.jsx(m,{variant:"outline",children:"Cancel"})}),e.jsxs(m,{type:"submit",form:"user-invite-form",children:["Invite ",e.jsx(Ye,{})]})]})]})})}function ea(){const{open:s,setOpen:a,currentRow:t,setCurrentRow:r}=L();return e.jsxs(e.Fragment,{children:[e.jsx(Z,{open:s==="add",onOpenChange:()=>a("add")},"user-add"),e.jsx(Qs,{open:s==="invite",onOpenChange:()=>a("invite")},"user-invite"),t&&e.jsxs(e.Fragment,{children:[e.jsx(Z,{open:s==="edit",onOpenChange:()=>{a("edit"),setTimeout(()=>{r(null)},500)},currentRow:t},`user-edit-${t.id}`),e.jsx(Zs,{open:s==="delete",onOpenChange:()=>{a("delete"),setTimeout(()=>{r(null)},500)},currentRow:t},`user-delete-${t.id}`)]})]})}function sa(){const{setOpen:s}=L();return e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(m,{variant:"outline",className:"space-x-1",onClick:()=>s("invite"),children:[e.jsx("span",{children:"Invite User"})," ",e.jsx(ne,{size:18})]}),e.jsxs(m,{className:"space-x-1",onClick:()=>s("add"),children:[e.jsx("span",{children:"Add User"})," ",e.jsx(Ze,{size:18})]})]})}function aa({table:s}){return e.jsxs("div",{className:"flex items-center justify-between overflow-clip px-2",style:{overflowClipMargin:1},children:[e.jsxs("div",{className:"hidden flex-1 text-sm text-muted-foreground sm:block",children:[s.getFilteredSelectedRowModel().rows.length," of"," ",s.getFilteredRowModel().rows.length," row(s) selected."]}),e.jsxs("div",{className:"flex items-center sm:space-x-6 lg:space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"hidden text-sm font-medium sm:block",children:"Rows per page"}),e.jsxs(me,{value:`${s.getState().pagination.pageSize}`,onValueChange:a=>{s.setPageSize(Number(a))},children:[e.jsx(xe,{className:"h-8 w-[70px]",children:e.jsx(ue,{placeholder:s.getState().pagination.pageSize})}),e.jsx(he,{side:"top",children:[10,20,30,40,50].map(a=>e.jsx(V,{value:`${a}`,children:a},a))})]})]}),e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",s.getState().pagination.pageIndex+1," of"," ",s.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(m,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>s.setPageIndex(0),disabled:!s.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(Xe,{className:"h-4 w-4"})]}),e.jsxs(m,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>s.previousPage(),disabled:!s.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(Qe,{className:"h-4 w-4"})]}),e.jsxs(m,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>s.nextPage(),disabled:!s.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(es,{className:"h-4 w-4"})]}),e.jsxs(m,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>s.setPageIndex(s.getPageCount()-1),disabled:!s.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(ss,{className:"h-4 w-4"})]})]})]})]})}function X({column:s,title:a,options:t}){const r=s==null?void 0:s.getFacetedUniqueValues(),l=new Set(s==null?void 0:s.getFilterValue());return e.jsxs(ie,{children:[e.jsx(oe,{asChild:!0,children:e.jsxs(m,{variant:"outline",size:"sm",className:"h-8 border-dashed",children:[e.jsx(as,{className:"h-4 w-4"}),a,(l==null?void 0:l.size)>0&&e.jsxs(e.Fragment,{children:[e.jsx(js,{orientation:"vertical",className:"mx-2 h-4"}),e.jsx(F,{variant:"secondary",className:"rounded-sm px-1 font-normal lg:hidden",children:l.size}),e.jsx("div",{className:"hidden space-x-1 lg:flex",children:l.size>2?e.jsxs(F,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:[l.size," selected"]}):t.filter(n=>l.has(n.value)).map(n=>e.jsx(F,{variant:"secondary",className:"rounded-sm px-1 font-normal",children:n.label},n.value))})]})]})}),e.jsx(ce,{className:"w-[200px] p-0",align:"start",children:e.jsxs(fs,{children:[e.jsx(Ns,{placeholder:a}),e.jsxs(vs,{children:[e.jsx(ws,{children:"No results found."}),e.jsx(G,{children:t.map(n=>{const x=l.has(n.value);return e.jsxs(B,{onSelect:()=>{x?l.delete(n.value):l.add(n.value);const i=Array.from(l);s==null||s.setFilterValue(i.length?i:void 0)},children:[e.jsx("div",{className:o("flex h-4 w-4 items-center justify-center rounded-sm border border-primary",x?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(ts,{className:o("h-4 w-4")})}),n.icon&&e.jsx(n.icon,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:n.label}),(r==null?void 0:r.get(n.value))&&e.jsx("span",{className:"ml-auto flex h-4 w-4 items-center justify-center font-mono text-xs",children:r.get(n.value)})]},n.value)})}),l.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(bs,{}),e.jsx(G,{children:e.jsx(B,{onSelect:()=>s==null?void 0:s.setFilterValue(void 0),className:"justify-center text-center",children:"Clear filters"})})]})]})]})})]})}function ta({table:s}){return e.jsxs(M,{modal:!1,children:[e.jsx(ls,{asChild:!0,children:e.jsxs(m,{variant:"outline",size:"sm",className:"ml-auto hidden h-8 lg:flex",children:[e.jsx(rs,{className:"mr-2 h-4 w-4"}),"View"]})}),e.jsxs(U,{align:"end",className:"w-[150px]",children:[e.jsx(ys,{children:"Toggle columns"}),e.jsx(z,{}),s.getAllColumns().filter(a=>typeof a.accessorFn<"u"&&a.getCanHide()).map(a=>e.jsx(Cs,{className:"capitalize",checked:a.getIsVisible(),onCheckedChange:t=>a.toggleVisibility(!!t),children:a.id},a.id))]})]})}function la({table:s}){var t;const a=s.getState().columnFilters.length>0;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-1 flex-col-reverse items-start gap-y-2 sm:flex-row sm:items-center sm:space-x-2",children:[e.jsx(b,{placeholder:"Filter users...",value:((t=s.getColumn("username"))==null?void 0:t.getFilterValue())??"",onChange:r=>{var l;return(l=s.getColumn("username"))==null?void 0:l.setFilterValue(r.target.value)},className:"h-8 w-[150px] lg:w-[250px]"}),e.jsxs("div",{className:"flex gap-x-2",children:[s.getColumn("status")&&e.jsx(X,{column:s.getColumn("status"),title:"Status",options:[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"Invited",value:"invited"},{label:"Suspended",value:"suspended"}]}),s.getColumn("role")&&e.jsx(X,{column:s.getColumn("role"),title:"Role",options:R.map(r=>({...r}))})]}),a&&e.jsxs(m,{variant:"ghost",onClick:()=>s.resetColumnFilters(),className:"h-8 px-2 lg:px-3",children:["Reset",e.jsx(ns,{className:"ml-2 h-4 w-4"})]})]}),e.jsx(ta,{table:s})]})}function ra({columns:s,data:a}){var k;const[t,r]=c.useState({}),[l,n]=c.useState({}),[x,i]=c.useState([]),[w,C]=c.useState([]),f=is({data:a,columns:s,state:{sorting:w,columnVisibility:l,rowSelection:t,columnFilters:x},enableRowSelection:!0,onRowSelectionChange:r,onSortingChange:C,onColumnFiltersChange:i,onColumnVisibilityChange:n,getCoreRowModel:Es(),getFilteredRowModel:zs(),getPaginationRowModel:Us(),getSortedRowModel:Ms(),getFacetedRowModel:Vs(),getFacetedUniqueValues:As()});return e.jsxs("div",{className:"space-y-4",children:[e.jsx(la,{table:f}),e.jsx("div",{className:"rounded-md border",children:e.jsxs(Ss,{children:[e.jsx(Ds,{children:f.getHeaderGroups().map(S=>e.jsx(A,{className:"group/row",children:S.headers.map(u=>{var I;return e.jsx(Is,{colSpan:u.colSpan,className:((I=u.column.columnDef.meta)==null?void 0:I.className)??"",children:u.isPlaceholder?null:O(u.column.columnDef.header,u.getContext())},u.id)})},S.id))}),e.jsx(Ps,{children:(k=f.getRowModel().rows)!=null&&k.length?f.getRowModel().rows.map(S=>e.jsx(A,{"data-state":S.getIsSelected()&&"selected",className:"group/row",children:S.getVisibleCells().map(u=>{var I;return e.jsx(K,{className:((I=u.column.columnDef.meta)==null?void 0:I.className)??"",children:O(u.column.columnDef.cell,u.getContext())},u.id)})},S.id)):e.jsx(A,{children:e.jsx(K,{colSpan:s.length,className:"h-24 text-center",children:"No results."})})})]})}),e.jsx(aa,{table:f})]})}const na=Ce([y("active"),y("inactive"),y("invited"),y("suspended")]),ia=Ce([y("superadmin"),y("admin"),y("cashier"),y("manager")]),oa=E({id:d(),firstName:d(),lastName:d(),username:d(),email:d(),phoneNumber:d(),status:na,role:ia,createdAt:W.date(),updatedAt:W.date()}),ca=Rs(oa),da=Array.from({length:20},()=>{const s=N.person.firstName(),a=N.person.lastName();return{id:N.string.uuid(),firstName:s,lastName:a,username:N.internet.username({firstName:s,lastName:a}).toLocaleLowerCase(),email:N.internet.email({firstName:s}).toLocaleLowerCase(),phoneNumber:N.phone.number({style:"international"}),status:N.helpers.arrayElement(["active","inactive","invited","suspended"]),role:N.helpers.arrayElement(["superadmin","admin","cashier","manager"]),createdAt:N.date.past(),updatedAt:N.date.recent()}}),ma=c.memo(()=>{const s=ca.parse(da);return e.jsxs(Os,{children:[e.jsxs(Ts,{children:[e.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between space-y-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:"User List"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your users and their roles here."})]}),e.jsx(sa,{})]}),e.jsx("div",{className:"-mx-4 flex-1 overflow-auto px-4 py-1 lg:flex-row lg:space-x-12 lg:space-y-0",children:e.jsx(ra,{data:s,columns:$s})})]}),e.jsx(ea,{})]})}),ja=os("/dashboard/users/")({component:ma});export{ja as Route};
