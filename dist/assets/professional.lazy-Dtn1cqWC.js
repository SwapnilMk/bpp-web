import{x as N,r as h,aM as F,aN as E,aO as v,j as e,bk as S,bl as r,bm as a,bn as i,bo as t,I as d,bp as l,bu as I,n as O,B as P,y as m,aQ as c,ct as y,c as q}from"./index-DEOwG95w.js";import{C as U}from"./content-section-tPEaA-AE.js";import{p as Y}from"./profile.service-Cwm0Gs2G.js";import{I as g}from"./image-upload-2Dbx1YfU.js";const R=v({occupation:c().min(2,{message:"Occupation is required."}),professional:v({qualification:c().optional(),profession:c().optional(),position:c().optional(),category:c().optional(),yearsOfExperience:y().min(0).max(100).optional(),summary:c().max(500).optional(),university:c().optional(),passoutYear:y().min(1900).max(new Date().getFullYear()).optional(),degreeCert:c().optional(),experienceCert:c().optional()}).optional()});function T(){const{user:n}=N(),[j,x]=h.useState(!0),o=F({resolver:E(R),defaultValues:{occupation:(n==null?void 0:n.occupation)||"",professional:(n==null?void 0:n.professional)||{qualification:void 0,profession:void 0,position:void 0,category:void 0,yearsOfExperience:void 0,summary:void 0,university:void 0,passoutYear:void 0,degreeCert:void 0,experienceCert:void 0}},mode:"onChange"});h.useEffect(()=>{n&&(o.reset({occupation:n.occupation,professional:n.professional||{qualification:void 0,profession:void 0,position:void 0,category:void 0,yearsOfExperience:void 0,summary:void 0,university:void 0,passoutYear:void 0,degreeCert:void 0,experienceCert:void 0}}),x(!1))},[n,o]);const C=async s=>{var p,f;try{x(!0),JSON.stringify(s.professional)!==JSON.stringify(n==null?void 0:n.professional)?(await Y.requestUpdate({updates:{professional:s.professional},type:"SENSITIVE"})).data.success&&m.success("Professional details update request sent for approval"):m.info("No changes detected in professional details")}catch(u){const b=u;m.error(((f=(p=b.response)==null?void 0:p.data)==null?void 0:f.message)||"Failed to update professional details")}finally{x(!1)}};return e.jsx(e.Fragment,{children:j?e.jsx("div",{className:"text-center text-muted-foreground",children:"Loading professional details..."}):e.jsx(S,{...o,children:e.jsxs("form",{id:"professional-form",onSubmit:o.handleSubmit(C),className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Professional Details"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your professional information (requires admin approval, can only be updated every 3 months)"})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(r,{control:o.control,name:"occupation",render:({field:s})=>e.jsxs(a,{children:[e.jsx(i,{children:"Occupation"}),e.jsx(t,{children:e.jsx(d,{...s})}),e.jsx(l,{})]})}),e.jsx(r,{control:o.control,name:"professional.qualification",render:({field:s})=>e.jsxs(a,{children:[e.jsx(i,{children:"Qualification"}),e.jsx(t,{children:e.jsx(d,{...s})}),e.jsx(l,{})]})}),e.jsx(r,{control:o.control,name:"professional.profession",render:({field:s})=>e.jsxs(a,{children:[e.jsx(i,{children:"Profession"}),e.jsx(t,{children:e.jsx(d,{...s})}),e.jsx(l,{})]})}),e.jsx(r,{control:o.control,name:"professional.position",render:({field:s})=>e.jsxs(a,{children:[e.jsx(i,{children:"Position"}),e.jsx(t,{children:e.jsx(d,{...s})}),e.jsx(l,{})]})}),e.jsx(r,{control:o.control,name:"professional.category",render:({field:s})=>e.jsxs(a,{children:[e.jsx(i,{children:"Category"}),e.jsx(t,{children:e.jsx(d,{...s})}),e.jsx(l,{})]})}),e.jsx(r,{control:o.control,name:"professional.yearsOfExperience",render:({field:s})=>e.jsxs(a,{children:[e.jsx(i,{children:"Years of Experience"}),e.jsx(t,{children:e.jsx(d,{type:"number",...s,onChange:p=>s.onChange(parseInt(p.target.value,10))})}),e.jsx(l,{})]})}),e.jsx(r,{control:o.control,name:"professional.university",render:({field:s})=>e.jsxs(a,{children:[e.jsx(i,{children:"University"}),e.jsx(t,{children:e.jsx(d,{...s})}),e.jsx(l,{})]})}),e.jsx(r,{control:o.control,name:"professional.passoutYear",render:({field:s})=>e.jsxs(a,{children:[e.jsx(i,{children:"Passout Year"}),e.jsx(t,{children:e.jsx(d,{type:"number",...s,onChange:p=>s.onChange(parseInt(p.target.value,10))})}),e.jsx(l,{})]})}),e.jsx(r,{control:o.control,name:"professional.summary",render:({field:s})=>e.jsxs(a,{className:"sm:col-span-2",children:[e.jsx(i,{children:"Summary"}),e.jsx(t,{children:e.jsx(I,{...s})}),e.jsx(l,{})]})}),e.jsx(r,{control:o.control,name:"professional.degreeCert",render:({field:s})=>e.jsxs(a,{children:[e.jsx(i,{children:"Degree Certificate"}),e.jsx(t,{children:e.jsx(g,{value:s.value,onChange:s.onChange,onRemove:()=>s.onChange("")})}),e.jsx(l,{})]})}),e.jsx(r,{control:o.control,name:"professional.experienceCert",render:({field:s})=>e.jsxs(a,{children:[e.jsx(i,{children:"Experience Certificate"}),e.jsx(t,{children:e.jsx(g,{value:s.value,onChange:s.onChange,onRemove:()=>s.onChange("")})}),e.jsx(l,{})]})})]})]}),e.jsx(O,{className:"my-6"}),e.jsx("div",{className:"flex justify-end",children:e.jsx(P,{type:"submit",disabled:j,children:"Update professional details"})})]})})})}function D(){return e.jsx(U,{title:"Professional Information",desc:"Update your professional details and work experience.",children:e.jsx(T,{})})}const J=q("/dashboard/profile/professional")({component:D});export{J as Route};
