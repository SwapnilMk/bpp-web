import{cv as N,r as h,aN as F,aO as S,aP as v,j as e,bn as E,bo as r,bp as n,bq as a,br as i,I as c,bs as t,bx as I,n as P,B as q,x as m,aR as l,cy as y,c as O}from"./index-CCIEx66s.js";import{C as U}from"./content-section-CTp5cUny.js";import{p as Y}from"./profile.service-B8MYvO4A.js";import{I as g}from"./image-upload-CvGWQE4x.js";const R=v({occupation:l().min(2,{message:"Occupation is required."}),professional:v({qualification:l().optional(),profession:l().optional(),position:l().optional(),category:l().optional(),yearsOfExperience:y().min(0).max(100).optional(),summary:l().max(500).optional(),university:l().optional(),passoutYear:y().min(1900).max(new Date().getFullYear()).optional(),degreeCert:l().optional(),experienceCert:l().optional()}).optional()});function T(){const d=N(s=>s.user.user),[j,x]=h.useState(!0),o=F({resolver:S(R),defaultValues:{occupation:"",professional:{qualification:void 0,profession:void 0,position:void 0,category:void 0,yearsOfExperience:void 0,summary:void 0,university:void 0,passoutYear:void 0,degreeCert:void 0,experienceCert:void 0}},mode:"onChange"});h.useEffect(()=>{d&&o.reset({occupation:d.occupation,professional:d.professional||{qualification:void 0,profession:void 0,position:void 0,category:void 0,yearsOfExperience:void 0,summary:void 0,university:void 0,passoutYear:void 0,degreeCert:void 0,experienceCert:void 0}}),x(!1)},[d,o]);const C=async s=>{var p,f;try{x(!0),JSON.stringify(s.professional)!==JSON.stringify(d==null?void 0:d.professional)?(await Y.requestUpdate({updates:{professional:s.professional},type:"SENSITIVE"})).data.success&&m.success("Professional details update request sent for approval"):m.info("No changes detected in professional details")}catch(u){const b=u;m.error(((f=(p=b.response)==null?void 0:p.data)==null?void 0:f.message)||"Failed to update professional details")}finally{x(!1)}};return e.jsx(e.Fragment,{children:j?e.jsx("div",{className:"text-center text-muted-foreground",children:"Loading professional details..."}):e.jsx(E,{...o,children:e.jsxs("form",{id:"professional-form",onSubmit:o.handleSubmit(C),className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Professional Details"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your professional information (requires admin approval, can only be updated every 3 months)"})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsx(r,{control:o.control,name:"occupation",render:({field:s})=>e.jsxs(n,{children:[e.jsx(a,{children:"Occupation"}),e.jsx(i,{children:e.jsx(c,{...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:o.control,name:"professional.qualification",render:({field:s})=>e.jsxs(n,{children:[e.jsx(a,{children:"Qualification"}),e.jsx(i,{children:e.jsx(c,{...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:o.control,name:"professional.profession",render:({field:s})=>e.jsxs(n,{children:[e.jsx(a,{children:"Profession"}),e.jsx(i,{children:e.jsx(c,{...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:o.control,name:"professional.position",render:({field:s})=>e.jsxs(n,{children:[e.jsx(a,{children:"Position"}),e.jsx(i,{children:e.jsx(c,{...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:o.control,name:"professional.category",render:({field:s})=>e.jsxs(n,{children:[e.jsx(a,{children:"Category"}),e.jsx(i,{children:e.jsx(c,{...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:o.control,name:"professional.yearsOfExperience",render:({field:s})=>e.jsxs(n,{children:[e.jsx(a,{children:"Years of Experience"}),e.jsx(i,{children:e.jsx(c,{type:"number",...s,onChange:p=>s.onChange(parseInt(p.target.value,10))})}),e.jsx(t,{})]})}),e.jsx(r,{control:o.control,name:"professional.university",render:({field:s})=>e.jsxs(n,{children:[e.jsx(a,{children:"University"}),e.jsx(i,{children:e.jsx(c,{...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:o.control,name:"professional.passoutYear",render:({field:s})=>e.jsxs(n,{children:[e.jsx(a,{children:"Passout Year"}),e.jsx(i,{children:e.jsx(c,{type:"number",...s,onChange:p=>s.onChange(parseInt(p.target.value,10))})}),e.jsx(t,{})]})}),e.jsx(r,{control:o.control,name:"professional.summary",render:({field:s})=>e.jsxs(n,{className:"sm:col-span-2",children:[e.jsx(a,{children:"Summary"}),e.jsx(i,{children:e.jsx(I,{...s})}),e.jsx(t,{})]})}),e.jsx(r,{control:o.control,name:"professional.degreeCert",render:({field:s})=>e.jsxs(n,{children:[e.jsx(a,{children:"Degree Certificate"}),e.jsx(i,{children:e.jsx(g,{value:s.value,onChange:s.onChange,onRemove:()=>s.onChange("")})}),e.jsx(t,{})]})}),e.jsx(r,{control:o.control,name:"professional.experienceCert",render:({field:s})=>e.jsxs(n,{children:[e.jsx(a,{children:"Experience Certificate"}),e.jsx(i,{children:e.jsx(g,{value:s.value,onChange:s.onChange,onRemove:()=>s.onChange("")})}),e.jsx(t,{})]})})]})]}),e.jsx(P,{className:"my-6"}),e.jsx("div",{className:"flex justify-end",children:e.jsx(q,{type:"submit",disabled:j,children:"Update professional details"})})]})})})}function D(){return e.jsx(U,{title:"Professional Information",desc:"Update your professional details and work experience.",children:e.jsx(T,{})})}const V=O("/dashboard/profile/professional")({component:D});export{V as Route};
